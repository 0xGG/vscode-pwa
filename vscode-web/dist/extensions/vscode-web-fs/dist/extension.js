!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var o in r)("object"==typeof exports?exports:e)[o]=r[o]}}(self,(function(){return(()=>{"use strict";var e={470:e=>{function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function r(e,t){for(var r,o="",i=0,n=-1,s=0,a=0;a<=e.length;++a){if(a<e.length)r=e.charCodeAt(a);else{if(47===r)break;r=47}if(47===r){if(n===a-1||1===s);else if(n!==a-1&&2===s){if(o.length<2||2!==i||46!==o.charCodeAt(o.length-1)||46!==o.charCodeAt(o.length-2))if(o.length>2){var c=o.lastIndexOf("/");if(c!==o.length-1){-1===c?(o="",i=0):i=(o=o.slice(0,c)).length-1-o.lastIndexOf("/"),n=a,s=0;continue}}else if(2===o.length||1===o.length){o="",i=0,n=a,s=0;continue}t&&(o.length>0?o+="/..":o="..",i=2)}else o.length>0?o+="/"+e.slice(n+1,a):o=e.slice(n+1,a),i=a-n-1;n=a,s=0}else 46===r&&-1!==s?++s:s=-1}return o}var o={resolve:function(){for(var e,o="",i=!1,n=arguments.length-1;n>=-1&&!i;n--){var s;n>=0?s=arguments[n]:(void 0===e&&(e=process.cwd()),s=e),t(s),0!==s.length&&(o=s+"/"+o,i=47===s.charCodeAt(0))}return o=r(o,!i),i?o.length>0?"/"+o:"/":o.length>0?o:"."},normalize:function(e){if(t(e),0===e.length)return".";var o=47===e.charCodeAt(0),i=47===e.charCodeAt(e.length-1);return 0!==(e=r(e,!o)).length||o||(e="."),e.length>0&&i&&(e+="/"),o?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,r=0;r<arguments.length;++r){var i=arguments[r];t(i),i.length>0&&(void 0===e?e=i:e+="/"+i)}return void 0===e?".":o.normalize(e)},relative:function(e,r){if(t(e),t(r),e===r)return"";if((e=o.resolve(e))===(r=o.resolve(r)))return"";for(var i=1;i<e.length&&47===e.charCodeAt(i);++i);for(var n=e.length,s=n-i,a=1;a<r.length&&47===r.charCodeAt(a);++a);for(var c=r.length-a,l=s<c?s:c,h=-1,u=0;u<=l;++u){if(u===l){if(c>l){if(47===r.charCodeAt(a+u))return r.slice(a+u+1);if(0===u)return r.slice(a+u)}else s>l&&(47===e.charCodeAt(i+u)?h=u:0===u&&(h=0));break}var f=e.charCodeAt(i+u);if(f!==r.charCodeAt(a+u))break;47===f&&(h=u)}var d="";for(u=i+h+1;u<=n;++u)u!==n&&47!==e.charCodeAt(u)||(0===d.length?d+="..":d+="/..");return d.length>0?d+r.slice(a+h):(a+=h,47===r.charCodeAt(a)&&++a,r.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var r=e.charCodeAt(0),o=47===r,i=-1,n=!0,s=e.length-1;s>=1;--s)if(47===(r=e.charCodeAt(s))){if(!n){i=s;break}}else n=!1;return-1===i?o?"/":".":o&&1===i?"//":e.slice(0,i)},basename:function(e,r){if(void 0!==r&&"string"!=typeof r)throw new TypeError('"ext" argument must be a string');t(e);var o,i=0,n=-1,s=!0;if(void 0!==r&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var a=r.length-1,c=-1;for(o=e.length-1;o>=0;--o){var l=e.charCodeAt(o);if(47===l){if(!s){i=o+1;break}}else-1===c&&(s=!1,c=o+1),a>=0&&(l===r.charCodeAt(a)?-1==--a&&(n=o):(a=-1,n=c))}return i===n?n=c:-1===n&&(n=e.length),e.slice(i,n)}for(o=e.length-1;o>=0;--o)if(47===e.charCodeAt(o)){if(!s){i=o+1;break}}else-1===n&&(s=!1,n=o+1);return-1===n?"":e.slice(i,n)},extname:function(e){t(e);for(var r=-1,o=0,i=-1,n=!0,s=0,a=e.length-1;a>=0;--a){var c=e.charCodeAt(a);if(47!==c)-1===i&&(n=!1,i=a+1),46===c?-1===r?r=a:1!==s&&(s=1):-1!==r&&(s=-1);else if(!n){o=a+1;break}}return-1===r||-1===i||0===s||1===s&&r===i-1&&r===o+1?"":e.slice(r,i)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var r=t.dir||t.root,o=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+o:r+"/"+o:o}(0,e)},parse:function(e){t(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return r;var o,i=e.charCodeAt(0),n=47===i;n?(r.root="/",o=1):o=0;for(var s=-1,a=0,c=-1,l=!0,h=e.length-1,u=0;h>=o;--h)if(47!==(i=e.charCodeAt(h)))-1===c&&(l=!1,c=h+1),46===i?-1===s?s=h:1!==u&&(u=1):-1!==s&&(u=-1);else if(!l){a=h+1;break}return-1===s||-1===c||0===u||1===u&&s===c-1&&s===a+1?-1!==c&&(r.base=r.name=0===a&&n?e.slice(1,c):e.slice(a,c)):(0===a&&n?(r.name=e.slice(1,s),r.base=e.slice(1,c)):(r.name=e.slice(a,s),r.base=e.slice(a,c)),r.ext=e.slice(s,c)),a>0?r.dir=e.slice(0,a-1):n&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};o.posix=o,e.exports=o},112:function(e,t,r){var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(i,n){function s(e){try{c(o.next(e))}catch(e){n(e)}}function a(e){try{c(o.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.deactivate=t.activate=void 0;const i=r(470),n=r(549),s=r(215),a=r(587);t.activate=function(e){var t;const r=new a.NativeFS;e.subscriptions.push(n.workspace.registerFileSystemProvider("nativefs",r,{isCaseSensitive:!0,isReadonly:!1}));const c=new s.MemFS;e.subscriptions.push(n.workspace.registerFileSystemProvider("memfs",c,{isCaseSensitive:!0,isReadonly:!1})),e.subscriptions.push(n.commands.registerCommand("nativefs.openFolder",(()=>o(this,void 0,void 0,(function*(){try{const e=yield n.commands.executeCommand("nativeFS.showDirectoryPicker");if(!e)return n.window.showErrorMessage("Failed to open folder");n.workspace.updateWorkspaceFolders(n.workspace.workspaceFolders?n.workspace.workspaceFolders.length:0,null,{uri:n.Uri.parse(`nativefs:${e}`),name:i.basename(e)})}catch(e){console.error(e),n.window.showErrorMessage("Your environment doesn't support the Native File System API")}}))))),e.subscriptions.push(n.commands.registerCommand("memfs.openFolder",(e=>o(this,void 0,void 0,(function*(){const e=yield n.window.showInputBox({value:"Welcome",placeHolder:"Please enter the folder name"});e||n.window.showErrorMessage("Empty folder name is not supported");try{c.createDirectory(n.Uri.parse(`memfs:/${e}`))}catch(e){}n.workspace.updateWorkspaceFolders(0,0,{uri:n.Uri.parse(`memfs:/${e}`),name:e})})))));try{c.createDirectory(n.Uri.parse("memfs:/Welcome"))}catch(e){}if(null===(t=n.workspace.workspaceFolders)||void 0===t?void 0:t.some((e=>"memfs"===e.uri.scheme&&"/Welcome"===e.uri.path))){const e=new TextEncoder;c.writeFile(n.Uri.parse("memfs:/Welcome/README.md"),e.encode("# Welcome! (Experiment)\n\nPlease open **Command Palette** then run: \n\n* `NativeFS: Open Folder` command to open a local folder on your device.  \n* `MemFS: Open Folder` command to create/open a temporary folder in memory. \n\nEmjoy!"),{create:!0,overwrite:!1})}},t.deactivate=function(){}},215:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MemFS=t.Directory=t.File=void 0;const o=r(470),i=r(549);class n{constructor(e){this.type=i.FileType.File,this.ctime=Date.now(),this.mtime=Date.now(),this.size=0,this.name=e}}t.File=n;class s{constructor(e){this.type=i.FileType.Directory,this.ctime=Date.now(),this.mtime=Date.now(),this.size=0,this.name=e,this.entries=new Map}}t.Directory=s,t.MemFS=class{constructor(){this.root=new s(""),this._emitter=new i.EventEmitter,this._bufferedEvents=[],this.onDidChangeFile=this._emitter.event}stat(e){return this._lookup(e,!1)}readDirectory(e){const t=this._lookupAsDirectory(e,!1),r=[];for(const[e,o]of t.entries)r.push([e,o.type]);return r}readFile(e){const t=this._lookupAsFile(e,!1).data;if(t)return t;throw i.FileSystemError.FileNotFound()}writeFile(e,t,r){const a=o.posix.basename(e.path),c=this._lookupParentDirectory(e);let l=c.entries.get(a);if(l instanceof s)throw i.FileSystemError.FileIsADirectory(e);if(!l&&!r.create)throw i.FileSystemError.FileNotFound(e);if(l&&r.create&&!r.overwrite)throw i.FileSystemError.FileExists(e);l||(l=new n(a),c.entries.set(a,l),this._fireSoon({type:i.FileChangeType.Created,uri:e})),l.mtime=Date.now(),l.size=t.byteLength,l.data=t,this._fireSoon({type:i.FileChangeType.Changed,uri:e})}rename(e,t,r){if(!r.overwrite&&this._lookup(t,!0))throw i.FileSystemError.FileExists(t);const n=this._lookup(e,!1),s=this._lookupParentDirectory(e),a=this._lookupParentDirectory(t),c=o.posix.basename(t.path);s.entries.delete(n.name),n.name=c,a.entries.set(c,n),this._fireSoon({type:i.FileChangeType.Deleted,uri:e},{type:i.FileChangeType.Created,uri:t})}delete(e){const t=e.with({path:o.posix.dirname(e.path)}),r=o.posix.basename(e.path),n=this._lookupAsDirectory(t,!1);if(!n.entries.has(r))throw i.FileSystemError.FileNotFound(e);n.entries.delete(r),n.mtime=Date.now(),n.size-=1,this._fireSoon({type:i.FileChangeType.Changed,uri:t},{uri:e,type:i.FileChangeType.Deleted})}createDirectory(e){const t=o.posix.basename(e.path),r=e.with({path:o.posix.dirname(e.path)}),n=this._lookupAsDirectory(r,!1),a=new s(t);n.entries.set(a.name,a),n.mtime=Date.now(),n.size+=1,this._fireSoon({type:i.FileChangeType.Changed,uri:r},{type:i.FileChangeType.Created,uri:e})}_lookup(e,t){const r=e.path.split("/");let o=this.root;for(const n of r){if(!n)continue;let r;if(o instanceof s&&(r=o.entries.get(n)),!r){if(t)return;throw i.FileSystemError.FileNotFound(e)}o=r}return o}_lookupAsDirectory(e,t){const r=this._lookup(e,t);if(r instanceof s)return r;throw i.FileSystemError.FileNotADirectory(e)}_lookupAsFile(e,t){const r=this._lookup(e,t);if(r instanceof n)return r;throw i.FileSystemError.FileIsADirectory(e)}_lookupParentDirectory(e){const t=e.with({path:o.posix.dirname(e.path)});return this._lookupAsDirectory(t,!1)}watch(e){return new i.Disposable((()=>{}))}_fireSoon(...e){this._bufferedEvents.push(...e),this._fireSoonHandle&&clearTimeout(this._fireSoonHandle),this._fireSoonHandle=setTimeout((()=>{this._emitter.fire(this._bufferedEvents),this._bufferedEvents.length=0}),5)}}},587:function(e,t,r){var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(i,n){function s(e){try{c(o.next(e))}catch(e){n(e)}}function a(e){try{c(o.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.NativeFS=void 0;const i=r(549);t.NativeFS=class{constructor(){this._emitter=new i.EventEmitter,this._bufferedEvents=[],this.onDidChangeFile=this._emitter.event}stat(e){return o(this,void 0,void 0,(function*(){try{const t=yield i.commands.executeCommand("nativeFS.stat",e);if(t)return t;throw i.FileSystemError.FileNotFound(e)}catch(t){throw i.FileSystemError.FileNotFound(e)}}))}readDirectory(e){return o(this,void 0,void 0,(function*(){try{const t=yield i.commands.executeCommand("nativeFS.readDirectory",e);if(t)return t;throw i.FileSystemError.FileNotFound(e)}catch(t){throw i.FileSystemError.FileNotFound(e)}}))}readFile(e){return o(this,void 0,void 0,(function*(){try{const t=yield i.commands.executeCommand("nativeFS.readFile",e);if(t)return Uint8Array.from(t);throw i.FileSystemError.FileNotFound(e)}catch(t){throw i.FileSystemError.FileNotFound(e)}}))}writeFile(e,t,r){return o(this,void 0,void 0,(function*(){const{events:o}=(yield i.commands.executeCommand("nativeFS.writeFile",e,Array.from(t),r))||{events:[]};o&&(o||[]).forEach((e=>{this._fireSoon(e)}))}))}rename(e,t,r){return o(this,void 0,void 0,(function*(){const{events:o}=(yield i.commands.executeCommand("nativeFS.rename",e,t,r))||{events:[]};o&&(o||[]).forEach((e=>{this._fireSoon(e)}))}))}delete(e,t){return o(this,void 0,void 0,(function*(){const{events:r}=(yield i.commands.executeCommand("nativeFS.delete",e,t))||{events:[]};r&&(r||[]).forEach((e=>{this._fireSoon(e)}))}))}createDirectory(e){return o(this,void 0,void 0,(function*(){const{events:t}=(yield i.commands.executeCommand("nativeFS.createDirectory",e))||{events:[]};t&&(t||[]).forEach((e=>{this._fireSoon(e)}))}))}watch(e){return new i.Disposable((()=>{}))}_fireSoon(...e){this._bufferedEvents.push(...e),this._fireSoonHandle&&clearTimeout(this._fireSoonHandle),this._fireSoonHandle=setTimeout((()=>{this._emitter.fire(this._bufferedEvents),this._bufferedEvents.length=0}),5)}}},549:e=>{e.exports=require("vscode")}},t={};return function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,r),n.exports}(112)})()}));