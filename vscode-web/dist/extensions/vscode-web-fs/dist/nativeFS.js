!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var i in r)("object"==typeof exports?exports:e)[i]=r[i]}}(self,(function(){return(()=>{"use strict";var e={373:(e,t,r)=>{r.r(t),r.d(t,{customAlphabet:()=>l,customRandom:()=>o,nanoid:()=>a,random:()=>n,urlAlphabet:()=>i});let i="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",n=e=>crypto.getRandomValues(new Uint8Array(e)),o=(e,t,r)=>{let i=(2<<Math.log(e.length-1)/Math.LN2)-1,n=-~(1.6*i*t/e.length);return()=>{let o="";for(;;){let l=r(n),a=n;for(;a--;)if(o+=e[l[a]&i]||"",o.length===t)return o}}},l=(e,t)=>o(e,t,n),a=(e=21)=>{let t="",r=crypto.getRandomValues(new Uint8Array(e));for(;e--;){let i=63&r[e];t+=i<36?i.toString(36):i<62?(i-26).toString(36).toUpperCase():i<63?"_":"-"}return t}},470:e=>{function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function r(e,t){for(var r,i="",n=0,o=-1,l=0,a=0;a<=e.length;++a){if(a<e.length)r=e.charCodeAt(a);else{if(47===r)break;r=47}if(47===r){if(o===a-1||1===l);else if(o!==a-1&&2===l){if(i.length<2||2!==n||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2))if(i.length>2){var d=i.lastIndexOf("/");if(d!==i.length-1){-1===d?(i="",n=0):n=(i=i.slice(0,d)).length-1-i.lastIndexOf("/"),o=a,l=0;continue}}else if(2===i.length||1===i.length){i="",n=0,o=a,l=0;continue}t&&(i.length>0?i+="/..":i="..",n=2)}else i.length>0?i+="/"+e.slice(o+1,a):i=e.slice(o+1,a),n=a-o-1;o=a,l=0}else 46===r&&-1!==l?++l:l=-1}return i}var i={resolve:function(){for(var e,i="",n=!1,o=arguments.length-1;o>=-1&&!n;o--){var l;o>=0?l=arguments[o]:(void 0===e&&(e=process.cwd()),l=e),t(l),0!==l.length&&(i=l+"/"+i,n=47===l.charCodeAt(0))}return i=r(i,!n),n?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(e){if(t(e),0===e.length)return".";var i=47===e.charCodeAt(0),n=47===e.charCodeAt(e.length-1);return 0!==(e=r(e,!i)).length||i||(e="."),e.length>0&&n&&(e+="/"),i?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,r=0;r<arguments.length;++r){var n=arguments[r];t(n),n.length>0&&(void 0===e?e=n:e+="/"+n)}return void 0===e?".":i.normalize(e)},relative:function(e,r){if(t(e),t(r),e===r)return"";if((e=i.resolve(e))===(r=i.resolve(r)))return"";for(var n=1;n<e.length&&47===e.charCodeAt(n);++n);for(var o=e.length,l=o-n,a=1;a<r.length&&47===r.charCodeAt(a);++a);for(var d=r.length-a,c=l<d?l:d,u=-1,s=0;s<=c;++s){if(s===c){if(d>c){if(47===r.charCodeAt(a+s))return r.slice(a+s+1);if(0===s)return r.slice(a+s)}else l>c&&(47===e.charCodeAt(n+s)?u=s:0===s&&(u=0));break}var h=e.charCodeAt(n+s);if(h!==r.charCodeAt(a+s))break;47===h&&(u=s)}var f="";for(s=n+u+1;s<=o;++s)s!==o&&47!==e.charCodeAt(s)||(0===f.length?f+="..":f+="/..");return f.length>0?f+r.slice(a+u):(a+=u,47===r.charCodeAt(a)&&++a,r.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var r=e.charCodeAt(0),i=47===r,n=-1,o=!0,l=e.length-1;l>=1;--l)if(47===(r=e.charCodeAt(l))){if(!o){n=l;break}}else o=!1;return-1===n?i?"/":".":i&&1===n?"//":e.slice(0,n)},basename:function(e,r){if(void 0!==r&&"string"!=typeof r)throw new TypeError('"ext" argument must be a string');t(e);var i,n=0,o=-1,l=!0;if(void 0!==r&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var a=r.length-1,d=-1;for(i=e.length-1;i>=0;--i){var c=e.charCodeAt(i);if(47===c){if(!l){n=i+1;break}}else-1===d&&(l=!1,d=i+1),a>=0&&(c===r.charCodeAt(a)?-1==--a&&(o=i):(a=-1,o=d))}return n===o?o=d:-1===o&&(o=e.length),e.slice(n,o)}for(i=e.length-1;i>=0;--i)if(47===e.charCodeAt(i)){if(!l){n=i+1;break}}else-1===o&&(l=!1,o=i+1);return-1===o?"":e.slice(n,o)},extname:function(e){t(e);for(var r=-1,i=0,n=-1,o=!0,l=0,a=e.length-1;a>=0;--a){var d=e.charCodeAt(a);if(47!==d)-1===n&&(o=!1,n=a+1),46===d?-1===r?r=a:1!==l&&(l=1):-1!==r&&(l=-1);else if(!o){i=a+1;break}}return-1===r||-1===n||0===l||1===l&&r===n-1&&r===i+1?"":e.slice(r,n)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var r=t.dir||t.root,i=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+i:r+"/"+i:i}(0,e)},parse:function(e){t(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return r;var i,n=e.charCodeAt(0),o=47===n;o?(r.root="/",i=1):i=0;for(var l=-1,a=0,d=-1,c=!0,u=e.length-1,s=0;u>=i;--u)if(47!==(n=e.charCodeAt(u)))-1===d&&(c=!1,d=u+1),46===n?-1===l?l=u:1!==s&&(s=1):-1!==l&&(s=-1);else if(!c){a=u+1;break}return-1===l||-1===d||0===s||1===s&&l===d-1&&l===a+1?-1!==d&&(r.base=r.name=0===a&&o?e.slice(1,d):e.slice(a,d)):(0===a&&o?(r.name=e.slice(1,l),r.base=e.slice(1,d)):(r.name=e.slice(a,l),r.base=e.slice(a,d)),r.ext=e.slice(l,d)),a>0?r.dir=e.slice(0,a-1):o&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};i.posix=i,e.exports=i},348:function(e,t,r){var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function l(e){try{d(i.next(e))}catch(e){o(e)}}function a(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(l,a)}d((i=i.apply(e,t||[])).next())}))},n=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=e[r]&&function(t){return new Promise((function(i,n){!function(e,t,r,i){Promise.resolve(i).then((function(t){e({value:t,done:r})}),t)}(i,n,(t=e[r](t)).done,t.value)}))}}};Object.defineProperty(t,"__esModule",{value:!0}),t.NativeFS=t.registerNativeFS=t.verifyPermission=void 0;const o=r(373),l=r(470);var a,d;function c(e){return new Error(`NativeFS FileNotFound ${e.path}`)}function u(e,t){return i(this,void 0,void 0,(function*(){const r={mode:t};return!!e&&("granted"===(yield e.queryPermission(r))||"granted"===(yield e.requestPermission(r)))}))}!function(e){e[e.Unknown=0]="Unknown",e[e.File=1]="File",e[e.Directory=2]="Directory",e[e.SymbolicLink=64]="SymbolicLink"}(a||(a={})),function(e){e[e.Changed=1]="Changed",e[e.Created=2]="Created",e[e.Deleted=3]="Deleted"}(d||(d={})),t.verifyPermission=u;let s=!1;t.registerNativeFS=function(e){if(s)return;s=!0;const t=new h;(e.commands||[]).push({id:"nativeFS.showDirectoryPicker",handler:()=>i(this,void 0,void 0,(function*(){const e=yield window.showDirectoryPicker();return t.attachDirectory(e)}))},{id:"nativeFS.stat",handler(e){return i(this,void 0,void 0,(function*(){return yield t.stat(e)}))}},{id:"nativeFS.readDirectory",handler(e){return i(this,void 0,void 0,(function*(){return yield t.readDirectory(e)}))}},{id:"nativeFS.readFile",handler(e){return i(this,void 0,void 0,(function*(){return yield t.readFile(e)}))}},{id:"nativeFS.writeFile",handler(e,r,n){return i(this,void 0,void 0,(function*(){return yield t.writeFile(e,r,n)}))}},{id:"nativeFS.rename",handler(e,r,n){return i(this,void 0,void 0,(function*(){return yield t.rename(e,r,n)}))}},{id:"nativeFS.delete",handler(e,r){return i(this,void 0,void 0,(function*(){return yield t.delete(e,r)}))}},{id:"nativeFS.createDirectory",handler(e){return i(this,void 0,void 0,(function*(){return yield t.createDirectory(e)}))}})};class h{constructor(){this.directoryHandleMap={}}attachDirectory(e){return i(this,void 0,void 0,(function*(){const t="/"+o.nanoid(8)+"/"+e.name+"/";return this.directoryHandleMap[t]=e,t}))}helper(e,t="readwrite"){return i(this,void 0,void 0,(function*(){const r=e.replace(/\/+$/,"").split("/"),i="/"+r[1]+"/"+r[2]+"/",n=this.directoryHandleMap[i];return yield u(n,t),[n,r.slice(3,r.length)]}))}stat(e){return i(this,void 0,void 0,(function*(){let[t,r]=yield this.helper(e.path,"read");if(!t)throw c(e);let o=0;for(;o<r.length-1;o++)t=yield t.getDirectoryHandle(r[o]);const l=()=>i(this,void 0,void 0,(function*(){var e,r;let i=0;try{for(var o,l=n(t.values());!(o=yield l.next()).done;)o.value,i+=1}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=l.return)&&(yield r.call(l))}finally{if(e)throw e.error}}return{type:a.Directory,ctime:0,mtime:0,size:i}}));if(!r.length)return yield l();try{const e=yield t.getFileHandle(r[o]),i=yield e.getFile();return{type:a.File,ctime:i.lastModified,mtime:i.lastModified,size:i.size}}catch(e){try{return yield t.getDirectoryHandle(r[o]),yield l()}catch(e){throw e}}}))}readDirectory(e){var t,r;return i(this,void 0,void 0,(function*(){let[i,o]=yield this.helper(e.path,"read");if(i){let e=0;for(;e<o.length;e++)i=yield i.getDirectoryHandle(o[e]);const c=[];try{for(var l,d=n(i.values());!(l=yield d.next()).done;){const e=l.value;c.push([e.name,"directory"===e.kind?a.Directory:a.File])}}catch(e){t={error:e}}finally{try{l&&!l.done&&(r=d.return)&&(yield r.call(d))}finally{if(t)throw t.error}}return c}throw c(e)}))}readFile(e){return i(this,void 0,void 0,(function*(){let[t,r]=yield this.helper(e.path,"read");if(t){let e=0;for(;e<r.length-1;e++)t=yield t.getDirectoryHandle(r[e]);const i=yield(yield t.getFileHandle(r[e])).getFile();return Array.from(new Uint8Array(yield i.arrayBuffer()))}throw c(e)}))}writeFile(e,t,r){var o,l;return i(this,void 0,void 0,(function*(){let[i,a]=yield this.helper(e.path,"readwrite");if(i){let h=0;for(;h<a.length-1;h++)i=yield i.getDirectoryHandle(a[h],{create:r.create});let f=!1;try{for(var u,s=n(i.values());!(u=yield s.next()).done;)if(u.value.name===a[h]){f=!0;break}}catch(e){o={error:e}}finally{try{u&&!u.done&&(l=s.return)&&(yield l.call(s))}finally{if(o)throw o.error}}if(!f&&!r.create)throw c(e);if(f&&r.create&&!r.overwrite)throw function(e){return new Error(`NativeFS FileExists ${e.path}`)}(e);const y=yield i.getFileHandle(a[h],{create:r.create}),v=[];f||v.push({type:d.Created,uri:e});const g=yield y.createWritable();return yield g.write(Uint8Array.from(t)),yield g.close(),v.push({type:d.Changed,uri:e}),{events:v}}throw c(e)}))}rename(e,t,r){return i(this,void 0,void 0,(function*(){const i=yield this.readFile(e);return yield this.writeFile(t,i,{create:!0,overwrite:r.overwrite}),yield this.delete(e,{recursive:!0}),{events:[{type:d.Deleted,uri:e},{type:d.Created,uri:t}]}}))}delete(e,t){return i(this,void 0,void 0,(function*(){let[r,i]=yield this.helper(e.path,"readwrite");if(!r)throw c(e);let n=0;for(;n<i.length-1;n++)r=yield r.getDirectoryHandle(i[n]);return yield r.removeEntry(i[n],{recursive:t.recursive}),{events:[{uri:e,type:d.Deleted}]}}))}createDirectory(e){return i(this,void 0,void 0,(function*(){let[t,r]=yield this.helper(e.path,"readwrite");if(!t)throw c(e);for(let e=0;e<r.length;e++)t=yield t.getDirectoryHandle(r[e],{create:!0});const i={scheme:"nativefs",path:l.posix.dirname(e.path),authority:"",query:"",fragment:""};return{events:[{type:d.Changed,uri:i},{type:d.Created,uri:e}]}}))}}t.NativeFS=h}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,r),o.exports}return r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(348)})()}));